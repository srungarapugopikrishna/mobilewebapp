<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script type = "text/javascript" language = "javascript">
 
    $(document).ready(function() {
    //Task1
    	$("#result1").click(function(event){
    		var url1= "http://api.census.gov/data/timeseries/idb/1year?get=AREA_KM2,NAME,AGE,POP&FIPS="+$("#FIPS1").val()+"&time="+$("#YEAR1").val()+"&SEX="+'';
    		
    		$.getJSON(url1,function( data ) {
    			var items=[];
    			$.each( data, function(key,value) {
    				var str = value.toString();
    				var res = str.split(",");

    				items.push( "<li id='" + key + "'>" + res[0]+" "+res[1]+"   "+res[2]+"   "+res[3]+"   "+res[4]+"   "+res[5]+"   "+res[6]+"   "+ "</li>" );
    			//	console.log(value);
    				});
    			$( "<ul/>", {
    				"class": "my-new-list",
    				html: items.join( "" )
    				}).appendTo( "body" );
    			});
    		});
    	//////////////////////////////////////////////////////////////////////////////////
    	//Task2
    	$("#result2").click(function(event){
    		var url1= "http://api.census.gov/data/timeseries/idb/1year?get=AGE,POP&FIPS="+$("#FIPS2").val()+"&time="+$("#YEAR2_1").val();
    		var url2= "http://api.census.gov/data/timeseries/idb/1year?get=AGE,POP&FIPS="+$("#FIPS2").val()+"&time="+$("#YEAR2_2").val();
    		var myArray=[];
    		var items=[];
    		$.getJSON(url1,function( data ) {
    			var count=0;
    			$.each( data, function(key,value) {
    				var str = value.toString();
    				var res = str.split(",");
	   				myArray[count]=res[1];
	   			    count=count+1;
    				});
    			});
    		$.getJSON(url2,function( data ) {
    			var count=0;
    			$.each( data, function(key,value) {
    				var str = value.toString();
    				var res = str.split(",");
            		var a= myArray[count]
            		var b=res[1];
            		if(count>0){
            			var popCalc=((b-a)/a)*100;
            			items.push( "<li id='" + key + "'>" + res[0]+" "+popCalc+"</li>" );
            		}else{
            			items.push( "<li id='" + key + "'>" + res[0]+" "+res[1]+"</li>" );
            		}
            		count=count+1;

    				});
    			$( "<ul/>", {
    				"class": "my-new-list",
    				html: items.join( "" )
    				}).appendTo( "body" );
    		});
    			});
    		
    	//////////////////////////////////////////////////////////////////////////////////
    	//Task3
    	$("#result3").click(function(event){
    		var url1= "http://api.census.gov/data/timeseries/idb/1year?get=AGE,POP&FIPS="+$("#FIPS3").val()+"&time="+$("#YEAR3").val()+"&SEX=1";
    		var url2= "http://api.census.gov/data/timeseries/idb/1year?get=AGE,POP&FIPS="+$("#FIPS3").val()+"&time="+$("#YEAR3").val()+"&SEX=2";
    		var myArray=[];
    		var items=[];
    		$.getJSON(url1,function( data ) {
    			var count=0;
    			$.each( data, function(key,value) {
    				var str = value.toString();
    				var res = str.split(",");
	   				myArray[count]=res[1];
//	   				console.log(res[1]);
	   			    count=count+1;
    				});
    			});
    		$.getJSON(url2,function( data ) {
    			var count=0;
    			$.each( data, function(key,value) {
    				var str = value.toString();
    				var res = str.split(",");
            		if(count>0){
            			items.push( "<li id='" + key + "'>" + res[0]+"&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp"+myArray[count]+"&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp"+res[1]+"</li>" );
            		}else{
            			items.push( "<li id='" + key + "'>" + res[0]+"&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp"+"MALE"+"&nbsp&nbsp&nbsp&nbsp&nbsp"+"FEMALE"+"</li>" );
            		}
            		count=count+1;

    				});
    			$( "<ul/>", {
    				"class": "my-new-list",
    				html: items.join( "" )
    				}).appendTo( "body" );
    		});
    			});
    		
    	//////////////////////////////////////////////////////////////////////////////////

    	});

</script>
</head>
<body>
Task 1:<br>
Population for all ages for a given country and year:<br>
Country(Ex: IN - India, UK - United Kingdom, US - United States, CA - Canada):<br>
<input type = "text" id = "FIPS1" /><br>
Year(2010 to 2014):<br>
<input type = "text" id = "YEAR1" /><br>
<input type = "button" id = "result1" value = "Get Data" />
<br>Task 2:<br>
Percentage increase/decrease in population for all ages for given years duration for a given country:<br>
Country(Ex: IN - India, UK - United Kingdom, US - United States, CA - Canada):<br>
<input type = "text" id = "FIPS2" /><br>
Year(2010 to 2014):<br>
Year1: <input type = "text" id = "YEAR2_1" /><br>
Year2: <input type = "text" id = "YEAR2_2" /><br>
<input type = "button" id = "result2" value = "Get Data" />
<br>Task 3:<br>
Display male and female population for all ages for the year "2014" and country "IN".
Country(Ex: IN - India, UK - United Kingdom, US - United States, CA - Canada):<br>
<input type = "text" id = "FIPS3" /><br>
Year(2010 to 2014):<br>
Year: <input type = "text" id = "YEAR3" /><br>
<input type = "button" id = "result3" value = "Get Data" />
<br>Task 4:<br>
<a href="graph.html">Get Graph</a>

</body>
</html>
